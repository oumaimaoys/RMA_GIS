/*─────────────────────────────────────────────────────────────────
  WRAPPER AROUND THE SIDEBAR + CHEVRON HANDLE
──────────────────────────────────────────────────────────────────*/
#toggle-container-wrapper {
  position: absolute;
  top: 80px;                     /* sits right below the fixed navbar (80px height) */
  left: 0;
  bottom: 0;
  display: flex;
  align-items: stretch;
  z-index: 1001;                 /* slightly above the map but below the info‐card (1002) */
  overflow: visible;
}

/*─────────────────────────────────────────────────────────────────
  THE SIDEBAR PANEL ITSELF
──────────────────────────────────────────────────────────────────*/
#toggle-container {
  width: 240px;  
  background: #ffffff;
  border-right: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15);
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  transition: transform 0.3s ease-in-out;
  transform: translateX(0);      /* fully visible by default */
  box-sizing: border-box;
}

/* When “collapsed” (add the class .collapsed via JS),
   slide the sidebar almost completely off-screen. */
#toggle-container.collapsed {
  transform: translateX(-220px);
}

/*─────────────────────────────────────────────────────────────────
  THE CHEVRON HANDLE (VISIBLE EVEN WHEN COLLAPSED)
──────────────────────────────────────────────────────────────────*/
#sidebar-toggle {
  position: absolute;
  top: 1rem;                     /* same vertical offset as the sidebar’s padding */
  left: 240px;                   /* place it just to the right edge of sidebar */
  width: 24px;
  height: 24px;
  background: #2563eb;
  color: #fff;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, left 0.3s ease-in-out;
  z-index: 1002;                 /* above the sidebar so it is always clickable */
}
#sidebar-toggle:hover {
  background: #1d4ed8;
}
#sidebar-toggle i {
  font-size: 1rem;
  transition: transform 0.3s ease-in-out;
  user-select: none;
}

/* If the sidebar is collapsed, move the chevron all the way to x=20px
   so you can still click it to reopen. Also, flip the icon. */
#toggle-container.collapsed + #sidebar-toggle {
  left: 20px;
}
#toggle-container.collapsed + #sidebar-toggle i {
  transform: rotate(180deg);
}

/*─────────────────────────────────────────────────────────────────
  EACH “ROW” INSIDE THE SIDEBAR (SEARCH BOX, SELECTS, TOGGLES, ETC.)
──────────────────────────────────────────────────────────────────*/
.toggle-switch {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}
.toggle-switch:not(:last-child) {
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #e2e8f0;
  margin-bottom: 0.5rem;
}
.toggle-switch label.layer-label {
  flex: 1;
  font-size: 0.9rem;
  color: #1e293b;
  white-space: nowrap;
}

/* Force any <select>, text input, or <button> to fit within each row
   without overflowing. We use box-sizing:border-box so padding is included. */
.toggle-switch select,
.toggle-switch input[type="text"],
.toggle-switch button {
  flex: 1.2;
  font-size: 0.9rem;
  box-sizing: border-box;
  max-width: 100%;              /* ensure it never overflows beyond the 240px container */
}

/*─────────────────────────────────────────────────────────────────
  CUSTOM SWITCHES (checkbox‐styled sliders)
──────────────────────────────────────────────────────────────────*/
.switch {
  position: relative;
  width: 36px;
  height: 20px;
  flex-shrink: 0;
}
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.switch .slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: 0.2s;
  border-radius: 10px;
}
.switch .slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 2px;
  bottom: 2px;
  background-color: #fff;
  transition: 0.2s;
  border-radius: 50%;
}
.switch input:checked + .slider {
  background-color: #2563eb;
}
.switch input:checked + .slider:before {
  transform: translateX(16px);
}

/*─────────────────────────────────────────────────────────────────
  SEARCH BOX STYLING
──────────────────────────────────────────────────────────────────*/
#search-box {
  display: flex;
  width: 100%;                   /* always fill the sidebar’s width */
  box-sizing: border-box;
}
#search-input {
  flex: 1;
  padding: 6px 8px;
  font-size: 0.9rem;
  border: 1px solid #ccc;
  border-radius: 4px 0 0 4px;
  box-sizing: border-box;
}
#search-box button {
  width: 36px;
  border: 1px solid #ccc;
  border-left: none;
  background: #2563eb;
  color: #fff;
  border-radius: 0 4px 4px 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}
#search-box button:hover {
  background: #1d4ed8;
}
#search-box button::before {
  content: "\f002";              /* Bootstrap Icons “search” */
  font-family: "Bootstrap Icons";
  font-size: 1rem;
  line-height: 1;
}

/*─────────────────────────────────────────────────────────────────
  “+ Nouveau site” BUTTON
──────────────────────────────────────────────────────────────────*/
.sim-btn {
  width: 100%;
  padding: 6px 0;
  background: #10b981;
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  cursor: pointer;
  transition: background 0.2s;
}
.sim-btn:hover {
  background: #0f9e6d;
}

/*─────────────────────────────────────────────────────────────────
  “Export PDF” BUTTON
──────────────────────────────────────────────────────────────────*/
.export-btn {
  width: 100%;
  padding: 6px 0;
  background: #d35400;
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background 0.2s;
}
.export-btn:hover {
  background: #ba4a00;
}

/*─────────────────────────────────────────────────────────────────
  INFO CARD (floats at bottom-right of the map)
──────────────────────────────────────────────────────────────────*/
#info-card {
  display: none;                        /* hidden by default */
  position: absolute;                   /* floats on top of map */
  z-index: 1002;                        /* above everything else */
  bottom: 20px;                         /* appear 20px from bottom */
  right: 20px;                          /* appear 20px from right */
  background: rgba(255, 255, 255, 0.95);/* slightly translucent white */
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 1rem 1.25rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  min-width: 200px;
  max-width: 260px;
  font-family: 'Inter', sans-serif;
  font-size: 0.9rem;
  box-sizing: border-box;
}
/* Close “×” button inside info-card */
#info-card .close-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  background: transparent;
  border: none;
  font-size: 1.1rem;
  cursor: pointer;
  color: #64748b;
  transition: color 0.2s;
}
#info-card .close-btn:hover {
  color: #ef4444;
}
#info-card h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
  color: #1e293b;
}
#info-card p {
  margin: 0.25rem 0;
  line-height: 1.3;
  color: #334155;
}
#info-card p strong {
  color: #1e293b;
}

/*─────────────────────────────────────────────────────────────────
  RESPONSIVE ADJUSTMENTS
──────────────────────────────────────────────────────────────────*/
@media (max-width: 768px) {
  #toggle-container {
    width: 200px;
    padding: 0.75rem;
  }
  #sidebar-toggle {
    left: 200px;
  }
  #toggle-container.collapsed + #sidebar-toggle {
    left: 20px;
  }
  .toggle-switch {
    gap: 0.4rem;
  }
  .sim-btn, .export-btn {
    font-size: 0.85rem;
  }
}

@media (max-width: 576px) {
  #toggle-container {
    width: 180px;
    padding: 0.5rem;
  }
  #toggle-container.collapsed {
    transform: translateX(-160px);
  }
  #sidebar-toggle {
    left: 180px;
  }
  #toggle-container.collapsed + #sidebar-toggle {
    left: 20px;
  }
  .toggle-switch {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.3rem;
  }
  .toggle-switch:not(:last-child) {
    margin-bottom: 0.5rem;
  }
  .sim-btn, .export-btn {
    font-size: 0.8rem;
  }
}

.toggle-switch select,
.toggle-switch input[type="text"],
.toggle-switch button {
  flex: 1;         /* share space equally with sibling labels */
  min-width: 0;    /* allow it to shrink down */
  max-width: 100%; /* never overflow its parent */
  box-sizing: border-box;
}

#search-box button {
  /* remove any flex: 1; inheritance */
  flex: 0 0 auto;      /* prevent growing/shrinking via flexbox */
  width: 36px;         /* keep the fixed icon‐button width */
  max-width: 36px;     /* never exceed 36px */
  box-sizing: border-box;
}